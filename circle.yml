machine:
  services:
    - docker

dependencies:
  override:
    - bash Backend/Django/setup-heroku.sh
    - docker pull mysql
    - docker build -f Backend/Django/Dockerfile -t api-damnificados .
    - docker run --name docker-mysql -e MYSQL_ROOT_PASSWORD=Derzitteraal666 -e MYSQL_DATABASE=danmificadosDb -d mysql 

test:
  override:
    - docker run -it --link docker-mysql:mysql -e DJANGO_ENV=development api-damnificados sh Backend/Django/tests.sh
 
deployment:
  qa:
    branch: master
    commands:
      - sh Backend/Django/deploy.sh